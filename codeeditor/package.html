<script type="text/javascript" src="{component-url}/syntax.js" ></script>
<script type="text/javascript" >var Controller=function(){function Controller(){var self=this;return self.statusbar="",self.words={tags:{count:0}},this.lastPosition=0,this.lineCount=[],this.syntaxList=[{title:"HTML",slug:"html"},{title:"Javascript",slug:"javascript"},{title:"CSS",slug:"css"},{title:"Terminal",slug:"terminal"}],this.theme=null,this.syntax=null,this.construct=function(container){var content="";if(void 0!=this.body&&(content=this.body.text),self._selector(".areaCode")[0].innerText=content,self.content(content),self._observer(function(){return self.lineCount},function(e){self.updateBg()}),self._observer(function(){return self._selector(".areaCode")[0].innerText},function(e){self.container.text=e.condition}),this.controller=this.container.getAttribute("raiz-controller"),this.theme=this.attr.theme||"monokai",this.syntax=this.attr.syntax||"unknown",void 0==this.attr.height&&(this.attr.height="initial"),void 0==this.attr.spellcheck&&(this.attr.spellcheck=!0),void 0==this.attr.numberlines&&(this.attr.numberlines=!0),void 0==this.attr.editable&&(this.attr.editable=!0),void 0==this.attr.nointerpolation&&(this.attr.nointerpolation=!1),self._selector(".areaCode")[0].setAttribute("contenteditable",this.attr.editable),self._selector(".areaCode")[0].setAttribute("spellcheck",this.attr.spellcheck),!1===this.attr.nointerpolation&&self._selector(".main")[0].removeAttribute("no-interpolation"),this.style={},this.style.areaCode={},"auto"==this.attr.height?this.style.areaCode.position="relative":this.style.areaCode.position="absolute","none"==this.syntax)return!1;try{"unknown"!=this.syntax&&eval("content = syntax_"+this.syntax+";")}catch(e){return setTimeout(function(){self.__construct()},100),console.log("Syntax ["+this.syntax+"] not found"),!1}this.loadTheme(this.theme),self._event(window,"resize",function(e,t){self.algnBox(t)},null,container),setTimeout(function(e,t){t.algnBox(e),t.load(t.attr.filename)},100,container,self)},this.algnBox=function(e){self._selector(".header")[0].offsetHeight,self._selector(".footer")[0].offsetHeight;var t=self._selector(".areaCode")[0].offsetHeight;"auto"==self.attr.height&&(e.style.height=t+"px")},this.load=function(e){e&&(self.statusbar="loading file...: "+e,raiz.essentials.ajax({url:e,success:function(t){self.content(t),self.statusbar=""+e},error:function(t){self.statusbar="error on load file: "+e}}))},this.loadTheme=function(e){if(void 0!=this.attr.themecustom){var t=(n=this.attr.themecustom).substring(n.lastIndexOf("/")+1);e=t=t.split(".")[0],this.attr.theme=e}else var n="{component-url}/theme-"+e+".css";this.container.classList.remove("theme-"+this.attr.theme),this.container.classList.add("theme-"+e),raiz.essentials.ajax({url:n,success:function(e){var t=document.createElement("style");t.innerHTML=e,self.container.appendChild(t)}})},this.updateBg=function(){var e=self._selector(".areaCode")[0].innerText;null==self.lineCount&&(self.lineCount=[]);var t=self._selector(".bg")[0];t.innerHTML="";var n=self.lineCount.length;0===n&&(this.lineCount=[0],n=self.lineCount.length),this.numberlines=n;for(var s=1;s<n+1;s++){(o=document.createElement("li")).innerHTML=""+s,t.appendChild(o)}var o,i=e.lastIndexOf("\n");"\n"!=e.substr(i,i+1)&&""!=e.substr(i,i+1)&&((o=document.createElement("li")).innerHTML=""+s,t.appendChild(o))},this.content=function(e){return void 0==self._selector?"":void 0==e?self._selector(".areaCode")[0].innerText:(self._selector(".areaCode")[0].innerText=e,void self.setColor(self._selector(".areaCode")[0]))},this.setColor=function(element){if(null===this.syntax)return setTimeout(function(e,t){e.setColor(t)},1,this,element),!1;var content=self._selector(".areaCode")[0].innerText,lineMatch=content.match(/\n/gm);self.lineCount=lineMatch,self.updateBg(),self.words.tags.count=0;var content=self._selector(".areaCode")[0].innerText,contentPre=content;try{eval("content = syntax_"+this.syntax+"(content,this.theme);")}catch(e){return!1}var isFocused=document.activeElement===element;if(isFocused){element.focus();var position=self.getCaretPosition(element)}element.innerHTML=content,isFocused&&self.setCaretPos(element,position+self.positionEnter)},this.getCaretPositionAbsolute=function(){var e=0,t=0,n=window.getSelection();if(n.rangeCount){var s=n.getRangeAt(0).cloneRange();if(s.getClientRects()){s.collapse(!0);var o=s.getClientRects()[0];o&&(t=o.top,e=o.left)}}return{x:e,y:t}},this[".areaCode"]=function(){return{mouseup:function(e){self.lastPosition=self.getCaretPosition(this)},input:function(e){},keydown:function(e){if(9==((e=e||window.event).keyCode||e.which))return document.execCommand("insertHTML",!0,"\t"),e.preventDefault(),!1},keyup:function(e){if(self.algnBox(self.container),self.lastPosition=self.getCaretPosition(this),1==e.ctrlKey&&"z"==e.key)return!1;if("ArrowLeft"==e.key||"ArrowRight"==e.key||"ArrowUp"==e.key||"ArrowDown"==e.key||"Shift"==e.key)return!0;if((1==e.ctrlKey||"Control"==e.key)&&"v"!==e.key)return!1;self.getCaretPosition(this);"Enter"==e.key?self.positionEnter=1:self.positionEnter=0,self.setColor(self._selector(".areaCode")[0])}}},this.insertHTML=function(e){e=(e=e.replace(/\</g,"&lt;")).replace(/\>/g,"&gt;"),self._selector(".areaCode")[0].focus(),self.setCaretPos(self._selector(".areaCode")[0],self.lastPosition),document.execCommand("insertHTML",!0,e),self.setColor(self._selector(".areaCode")[0])},this.insertHTMLEffective=function(e,t){var n,s;if(window.getSelection&&(n=window.getSelection()).rangeCount){(s=n.getRangeAt(0)).collapse(!0);var o=document.createElement(t);e.id="myId",e.appendChild(o),s.insertNode(e),s.setStartAfter(e),s.collapse(!0),n.removeAllRanges(),n.addRange(s)}},this.getCaretPosition=function(e){var t=void 0!==document.selection&&"Control"!=document.selection.type&&!0,n=0;if(void 0!==window.getSelection&&!0){var s=window.getSelection().getRangeAt(0),o=s.cloneRange();o.selectNodeContents(e),o.setEnd(s.endContainer,s.endOffset),n=o.toString().length}else if(t){var i=document.selection.createRange(),l=document.body.createTextRange();l.expand(e),l.setEndPoint("EndToEnd",i),n=l.text.length}return n},this.setCaretPos=function(e,t){var n=0,s=document.createRange();s.setStart(e,0),s.collapse(!0);for(var o,i=[e],l=!1,r=!1;!r&&(o=i.pop());)if(3==o.nodeType){var a=n+o.length;!l&&t>=n&&t<=a&&(s.setStart(o,t-n),l=!0),l&&t>=n&&t<=a&&(s.setEnd(o,t-n),r=!0),n=a}else for(var c=o.childNodes.length;c--;)i.push(o.childNodes[c]);selection=window.getSelection(),selection.removeAllRanges(),selection.addRange(s)},this.setSyntax=function(e){self.syntax=e,self.loadTheme(self.theme),self.setColor(self._selector(".areaCode")[0])},this.setTheme=function(e){self.loadTheme(e),self.setColor(self._selector(".areaCode")[0])},this._syntaxSel=function(){return{change:function(e){self.syntax=this.value,self.loadTheme(self.theme),self.setColor(self._selector(".areaCode")[0])}}},this}return new Controller}();</script>
<style type="text/css" >.areaCode,.areaCode *{font:12px monospace,sans-serif}.areaCode,.bg{position:absolute;width:100%}.areaCode{outline:0;min-height:100%;z-index:1;box-sizing:border-box;white-space:pre-wrap}.bg{left:0;top:0;margin:0;z-index:0;padding:9px 0}.bg li{list-style-type:none;height:14px!important;list-style-position:inside;padding:0 10px!important;border-bottom:1px solid transparent}.codeeditor{border:0!important;display:table!important;width:100%!important;min-height:35px!important;position:relative!important;overflow-x:hidden!important;overflow-y:auto!important;white-space:normal!important;resize:both!important;border-collapse:collapse!important}.codeeditor[raiz-controller="{{this.controller}}"]{height:{{this.attr.height}}}.codeeditor *{font-family:monospace}.codeeditor .header{display:table-row;height:.1px}.codeeditor .main{display:table-cell;overflow-x:hidden;position:absolute;width:100%;height:100%}.codeeditor .footer{display:table-row;height:.1px}.codeeditor[raiz-controller="{{this.controller}}"] .areaCode{position:{{this.style.areaCode.position}}}</style>
<script type="text/html" >
	<div class="header " raiz-if="this.attr.headerbar != 'false'">
		<div class="codeeditor-wrapper">
			<!-- <a href="https://raiz.wallrio.com" target="_blank" class="title">{{this.attr.bartitle || 'Raiz Code Editor'}}</a> -->
			{{this.attr.bartitle || 'Raiz Code Editor'}}
			<span id="statusbar" style="float:right"><!--{{this.statusbar}}--></span>
		</div>
	</div>
	<div no-interpolation class="main" data-numberlines="{{this.attr.numberlines}}">
		<ol class="bg" raiz-if="this.attr.numberlines != 'false'"></ol>
		<div  class="areaCode" contenteditable="true"  data-editable="{{this.attr.editable}}" ></div>
	</div>
	<div class="footer" raiz-if="this.attr.footerbar != 'false'">
		<div class="codeeditor-wrapper">
			<span id="lineCount">lines: <!--{{this.numberlines}}--></span>
			-
			<span id="syntax" title="Syntax"><!--{{this.syntax}}--></span>
			-
			<span id="syntax" title="Syntax"><!--{{this.theme}}--></span>
		</div>
	</div>
</script>